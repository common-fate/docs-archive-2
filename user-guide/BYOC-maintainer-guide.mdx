---
title: "Requesting Access"
description: "Request Access using Common Fate"
---

Your Common Fate deployment is hosted in your cloud environment using our BYOC model.

Your primary point of contact to the Common Fate team is via our Slack Connect channel. If Slack is unavailable you can reach us via in-app support (click the “Support” button in the navbar) or at [support@commonfate.io](mailto:support@commonfate.io).

## Integration Points

Your Common Fate deployment has the following integrations:

### AWS IAM Identity Center

There are two AWS roles deployed to your AWS organization which give Common Fate permission to read resources and provision access respectively. These roles are deployed via the `common-fate/common-fate-deployment/aws//modules/aws-idc-integration/iam-role` Terraform module.

**Failure modes:**

- If the read role is deleted, Common Fate will be unable to update IAM Identity Center user, group, AWS account, and permission set information. Existing data is cached by the deployment.
- If the provisioning role is deleted, Common Fate will be unable to provision or deprovision access to AWS. During provisioning an IAM permissions error will be shown.

**Runbook:**

- Message the Slack Connect channel with Common Fate to indicate there is a provisioning or read issue.
- Verify that the roles still exist in AWS.
- Re-run a `terraform plan` for the Terraform module to check whether the permissions to the role are correct.

### **Okta Groups**

The Okta integration is configured through an API Token in your Okta Admin console. The API token is then saved in your AWS account's SSM Parameter Store in the region in which Common Fate is deployed. It is typically saved with the name `/common-fate/prod/okta-api-key`

**Failure modes:**

- If the API Token in Okta or SSM Parameter Store is deleted, Common Fate will be unable to access any resources in Okta or provision/deprovision access to Okta groups. During requesting access an error will be shown.

**Runbook:**

- Message the Slack Connect channel with Common Fate to indicate there is a provisioning or read issue.
- Verify that the API Token exists in Okta and SSM Parameter Store

## **For deployment failures**

The alert will fire if you trigger a new Terraform deployment with `terraform apply`, but the ECS task doesn’t roll out properly (internally the event comes from [ECS Deployment Circuit Breaker](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/deployment-circuit-breaker.html)). The stack is configured to use blue/green deployments, so the previous version of the task will still be running. So in this instance, the alert firing doesn’t necessarily mean the product is unavailable.

**Runbook:**

- Check the deployment events in the ECS cluster for details as to why the task failed.
- Revert or fix the configuration which caused the task to fail and rerun `terraform apply`

## **For syncing task failures**

If the alert is firing, the impact is that Common Fate will not sync any updates and resource data inside of Common Fate may be stale. For example, if you add a tag to an AWS account, but the `aws_idc_sync` task is failing, the new tag will not sync to Common Fate. Access Requests will continue to work, but the resource data will be stale.

**Runbook:**

- Confirm whether there were any recent changes to the integration configuration in Terraform which corresponded to the alert firing (for example, was the `read_role_arn` updated to an invalid role).
- Confirm whether the credentials used by Common Fate in the application are still valid. The error message in the alert will indicate whether the issue is due to invalid credentials.
- For example, in AWS, confirm that the role deployed by the `common-fate/common-fate-deployment/aws//modules/aws-idc-integration/iam-roles` actually exists. For the AWS integration, re-run `terraform apply` on the IAM role module to check whether there has been any drift. For other applications like OpsGenie, confirm that the API key used by Common Fate exists.
- Update the configuration to fix the permission error (for example, by recreating the OpsGenie API key) and re-run `terraform apply`

## **For cleanup task failure**

If the alert is firing, the impact is that Common Fate is failing to clean up expired access and de-provision access. End users will still be able to request access, but access may be granted for longer than intended.

**Runbook:**

- Confirm whether there were any recent changes to the integration configuration in Terraform which corresponded to the alert firing (for example, was the `provision_role_arn` updated to an invalid role).
- Confirm whether the credentials used by Common Fate in the application are still valid. The error message in the alert will indicate whether the issue is due to invalid credentials.
- Check the logs of the `provisioner` service which will include detailed information around the failure
- Update the configuration to fix the permission error (for example, by changing the `provision_role_arn` to the correct value) and re-run `terraform apply`

When the cleanup task recovers, expired access will be cleaned up automatically.
